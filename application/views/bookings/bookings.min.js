
(function(a){a.bookings={section:"",page:"",init:function(){a(".frequency").change(function(){a.bookings.frequency_change(a(this))});a.bookings.frequency_change(a(".frequency"));a(".rooms").change(function(){a.bookings.rooms_change(a(this));a(".equiptment_selection").children("option").each(function(){if(a(this).attr("which_room")!=="id"){a(this).attr("disabled","disabled")}else{a(this).removeAttr("disabled")}});a(".layout_selection").children("option").each(function(){if(a(this).attr("which_room")!=="id"){a(this).attr("disabled","disabled")}else{a(this).removeAttr("disabled")}})});a.bookings.rooms_change(a(".rooms"));a(".people").change(function(){cap=parseInt(a(this).val());a(".rooms").children("option").each(function(){if(a(this).attr("capacity")<cap){a(this).attr("disabled","disabled")}else{a(this).removeAttr("disabled")}})});a(".room-booking-form").submit(function(b){if(typeof(b.originalEvent)==="undefined"){return}b.preventDefault();a("<div/>").html("Confirm\n                                <table>\n                                <tr><td>Title</td><td>"+a(".title").val()+'</td>\n                                <td style="border:0"></td>\n                                <td>First date</td><td>'+a(".start-date").children("input").val()+"</td>\n                                <tr><td>Phone number</td><td>"+a(".phone").val()+'</td>\n                                <td style="border:0"></td>\n                                <td>Start time</td><td>'+a(".start-hour").val()+":"+a(".start-min").val()+"</td>\n                                <tr><td>Room</td><td>"+a(".rooms").children("[value="+a(".rooms").val()+"]").html()+'</td>\n                                <td style="border:0"></td>\n                                <td>End time</td><td>'+a(".end-hour").val()+":"+a(".end-min").val()+"</td>\n                                <tr><td>Number of people</td><td>"+a(".people").val()+'</td>\n                                <td style="border:0"></td>\n                                <td>Frequency</td><td>'+a(".frequency").children("[value="+a(".frequency").val()+"]").html()+"</td>\n                                <tr><td>Layout</td><td>"+a(".layouts").children("[value="+a(".layouts").val()+"]").html()+'</td>\n                                <td style="border:0"></td>\n                                <td>Last date</td><td>'+a(".last-date").children("input").val()+"</td>\n                                <tr><td>Equiptment</td><td>"+a("input[room-id="+a(".rooms").val()+"]:checked").map(function(){return a(this).val()}).get().join(", ")+"</td>\n                                </table>").dialog({buttons:[{text:"Ok",icons:{primary:"ui-icon-check"},click:function(){a(this).dialog("close");a(".room-booking-form").submit()}},{text:"Cancel",icons:{primary:"ui-icon-close"},click:function(){a(this).dialog("close")}}],width:1000})})},frequency_change:function(b){if(b.val()==0){a(".last-date").hide()}else{a(".last-date").show()}},rooms_change:function(b){a(".equiptment_selection").children().each(function(){if(a(this).children("input").attr("room-id")==a(".rooms").val()){a(this).show()}else{a(this).hide()}});a(".layout_selection").children("select").children().each(function(){if(a(this).attr("room-id")==a(".rooms").val()){a(this).show();a(this).addClass("visible-layout")}else{a(this).hide();a(this).removeClass("visible-layout")}});if(a(".visible-layout").length==0){a(".layout_selection").hide()}else{a(".layout_selection").show()}a(".layouts").val("")}}})(jQuery);