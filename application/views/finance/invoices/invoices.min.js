/* Minified JS */
(function(a){a.invoices={init:function(){a("#invoice-add-members").click(function(c){c.preventDefault();ids="";a("#namelist").children().each(function(){id=a(this).attr("id");ids+=id+","});a("#ids").val(ids);a("#invoice-add-members-form").submit()});a("#invoice-add-member").click(function(){a.invoices.addToList()});a("#nameentry").keydown(function(c){if(c.keyCode==13){a.invoices.addToList()}});a(".invoice-mark-paid").click(function(e){e.preventDefault();var c=a(this);var d=c.siblings(".invoice-marked-status").text()=="1";a.ajax({type:"POST",url:script_url+"finance/invoices/mark_paid/",data:{id:c.siblings(".invoice-id").text(),new_status:(d?"0":"1")},error:function(){a.common.notify("The status of this invoice could not be changed.")},success:function(){b=c;var f=d?"0":"1";c.siblings(".invoice-marked-status").text(f);var g=d?"Mark As Paid":"Unmark As Paid";c.html(g);a("#astrix").text(d?"":"*")}})});a(".remove-member").click(function(d){d.preventDefault();var c=a("<div />").addClass("delete-conf-box");c.html("Are you sure you want to remove this member?<br />");button=a(this);console.log(button.closest("div"));c.dialog({resizable:false,draggable:false,modal:true,title:"Confirm Removal",buttons:{Remove:function(){a.ajax({type:"POST",url:script_url+"finance/invoices/remove_member/",data:{user:button.siblings(".member-id").html(),group:a("#group-id").html()},error:function(){a.common.notify("The member could not be removed")},success:function(){button.closest("div").remove()}});a(this).dialog("close")},Cancel:function(){a(this).dialog("close")}}})});a(".set-privileges").click(function(d){d.preventDefault();var c=a("<div />").addClass("delete-conf-box");c.html("Are you sure you want to change this users permissions?<br />");button=a(this);c.dialog({resizable:false,draggable:false,modal:true,title:"Confirm Permissions",buttons:{Change:function(){a.ajax({type:"POST",url:script_url+"finance/invoices/change_permissions/",data:{user:button.siblings(".member-id").html(),group:a("#group-id").html(),new_status:button.siblings(".admin-check").hasClass("is-admin")==true?0:1},error:function(){a.common.notify("Unknown Error")},success:function(){if(button.siblings(".admin-check").hasClass("is-admin")){button.siblings(".admin-check").removeClass("is-admin");button.html("Make Admin")}else{button.siblings(".admin-check").addClass("is-admin");button.html("Remove Admin")}}});a(this).dialog("close")},Cancel:function(){a(this).dialog("close")}}})});a("#new-group-owner").blur(function(){var c=a(this).val();id=-1;a("#fullnameslist").children().each(function(){if(a(this).html()==c){id=a(this).attr("id")}});a("#new-group-owner-id").val(id)});a(".remind-invoice").click(function(d){link=a(this).attr("href");d.preventDefault();var c=a("<div />").html("Are you sure you wish to remind all members? They get an email once a week anyway.<br />");c.dialog({resizable:false,draggable:false,modal:true,title:"Confirm Reminder",buttons:{Send:function(){a(this).dialog("close");window.location.href=link},Cancel:function(){a(this).dialog("close")}}})})},addToList:function(){var c=a("#nameentry").val();a("#nameentry").val("");var d=a("#nameentry-id").val();a("#nameentry-id").val("");a("#namelist").append('<option id="'+d+'">'+c+"</option>");a("#nameentry").focus()}}})(jQuery);